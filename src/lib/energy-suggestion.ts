// 分区文案库 - 根据能量区间提供不同的陪伴式建议
// 风格：不迷信、不说教、不鸡汤、陪伴式

const suggestionsByRange = {
  // 0-20: 偏向安抚与承接
  low: [
    '今天已经很不容易了，允许自己什么都不做。',
    '不必强撑，你现在最需要的是休息。',
    '状态不好也没关系，接纳这个状态就好。',
    '今天适合对自己温柔一点，别太苛责。',
    '可以暂停，允许自己暂时"消失"。',
    '不必非要好转，允许低能量存在。',
    '今天最重要的是照顾好自己。',
    '不必解释状态，你的感受就是答案。',
    '可以慢下来，比什么都重要。',
    '今天适合独处，不必回应任何人。',
  ],
  // 21-40: 允许放慢、减少消耗
  lowMid: [
    '今天更适合照顾内在，而不是向外输出。',
    '允许慢下来，本身就是一种选择。',
    '不必强求效率，节奏可以慢一点。',
    '今天适合减少社交，给自己留点空间。',
    '不必立刻解决所有问题，可以先放着。',
    '允许自己不完美，真实就好。',
    '今天更适合倾听，而不是表达。',
    '不必讨好任何人，先照顾自己。',
    '可以减少决定，选择权留给自己。',
    '今天适合整理内心，而不是行动。',
  ],
  // 41-60: 稳定观察、不过度用力
  mid: [
    '状态平稳，适合观察自己的节奏。',
    '不必过度用力，保持现在的样子就好。',
    '今天适合稳定，不需要大的改变。',
    '允许自己保持现状，不必强求进步。',
    '今天适合温和地做自己，不勉强。',
    '不必分析太多，感受就好。',
    '可以保持平衡，不过度消耗。',
    '今天适合跟随直觉，不强求理性。',
    '不必证明什么，你的存在就足够。',
    '可以接受平淡，这也是一种美好。',
  ],
  // 61-80: 温和引导行动
  midHigh: [
    '状态不错，但记得为自己留一点余地。',
    '今天适合做一件小事，感受完成。',
    '不必追求完美，做到就好。',
    '今天适合温和地表达，不必对抗。',
    '可以向前迈一小步，不着急。',
    '不必掌控一切，允许不确定性。',
    '今天适合信任自己，相信直觉。',
    '不必强求结果，享受过程就好。',
    '可以尝试新事物，但不要勉强。',
    '今天适合温柔地行动，不急躁。',
  ],
  // 81-100: 提醒边界与节奏
  high: [
    '能量充沛，但记得给自己留点边界。',
    '今天适合热情，但不要透支。',
    '不必过度输出，保留一些给自己。',
    '可以享受当下，但也记得休息。',
    '今天适合关注内在，不向外跑太远。',
    '不必追求更多，适度就好。',
    '可以分享喜悦，但不必强求共鸣。',
    '今天适合保持节奏，不被带偏。',
    '不必证明自己，你本来就好。',
    '可以享受高能量，但也允许它流动。',
  ],
};

/**
 * 获取能量区间
 */
function getEnergyRange(value: number): keyof typeof suggestionsByRange {
  if (value <= 20) return 'low';
  if (value <= 40) return 'lowMid';
  if (value <= 60) return 'mid';
  if (value <= 80) return 'midHigh';
  return 'high';
}

/**
 * 根据能量值和日期获取建议
 * 同一天同一区间的建议会随机变化（通过日期种子）
 */
export function getEnergySuggestion(value: number, date: Date = new Date()): string {
  const range = getEnergyRange(value);
  const suggestions = suggestionsByRange[range];

  // 使用日期和能量值作为种子，确保：
  // 1. 同一天同一区间会随机选一条（但今天内保持一致）
  // 2. 拖动到不同区间会立即变化
  // 3. 明天同一区间可能会是不同的建议
  const seed = date.getFullYear() * 10000 + (date.getMonth() + 1) * 100 + date.getDate();
  const rangeSeed = seed + value; // 加入能量值，确保不同区间不同文案
  const index = Math.abs(rangeSeed) % suggestions.length;

  return suggestions[index];
}

/**
 * 获取当前能量区间的标签（可选，用于调试或额外展示）
 */
export function getEnergyRangeLabel(value: number): string {
  if (value <= 20) return '低能量';
  if (value <= 40) return '偏低';
  if (value <= 60) return '平稳';
  if (value <= 80) return '较高';
  return '高能量';
}
